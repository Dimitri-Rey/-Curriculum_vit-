document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".burger"),t=document.querySelector("nav ul");e&&t&&e.addEventListener("click",()=>{t.classList.toggle("show")});document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(n=>{const r=document.querySelector(e.getAttribute("href"));r&&(n.preventDefault(),window.scrollTo({top:r.offsetTop-50,behavior:"smooth"}),t.classList.remove("show"))}))}));const n=Array.from(document.querySelectorAll(".fade-in"));function r(){for(let e=n.length-1;e>=0;e--){const t=n[e].getBoundingClientRect();t.top<=.8*window.innerHeight&&(n[e].classList.add("visible"),n.splice(e,1))}0===n.length&&window.removeEventListener("scroll",r)}window.addEventListener("scroll",r),r()});

// Ajouter la nouvelle classe Chatbot
class Chatbot {
    constructor() {
        this.responses = {
            // Salutations
            "bonjour": "ðŸ‘‹ Bonjour ! Je suis l'assistant virtuel d'Alex. Comment puis-je vous aider aujourd'hui ? \n\nðŸ’¡ Vous pouvez me poser des questions sur :\nâ€¢ Les compÃ©tences d'Alex\nâ€¢ Ses projets\nâ€¢ Sa disponibilitÃ©\nâ€¢ Ses tarifs",
            "salut": "ðŸ‘‹ Hey ! Ravi de vous rencontrer ! Je suis lÃ  pour vous parler des services d'Alex. Que souhaitez-vous savoir ? ðŸ˜Š",
            "hello": "ðŸ‘‹ Hello ! Super de vous voir ici ! Comment puis-je vous aider ? ðŸŒŸ",
            "bonsoir": "ðŸŒ™ Bonsoir ! Je suis l'assistant d'Alex, disponible 24/7 pour rÃ©pondre Ã  vos questions !",
            "coucou": "ðŸ‘‹ Coucou ! Ravi de vous voir ! Je peux vous renseigner sur tout ce qui concerne Alex et ses services ðŸ˜Š",

            // DisponibilitÃ© et Contact
            "disponible": "ðŸ“… Voici les disponibilitÃ©s d'Alex :\n\nâ€¢ Nouveaux projets : Ã  partir de septembre 2024\nâ€¢ Consulting : quelques crÃ©neaux par semaine\nâ€¢ Formation : sur demande\n\nVoulez-vous prendre rendez-vous ? ðŸ¤",
            "disponibilitÃ©": "ðŸ—“ï¸ Alex accepte de nouveaux projets Ã  partir de septembre 2024.\n\nPour un RDV rapide :\nðŸ“§ Email : alex.garnier@techpro.com\nðŸ“± TÃ©l : 07 89 45 67 12",
            "contact": "ðŸ“¬ Voici comment joindre Alex :\n\nðŸ“§ Email : alex.garnier@techpro.com\nðŸ“± TÃ©lÃ©phone : 07 89 45 67 12\nðŸ’¼ LinkedIn : /in/alex-garnier\nðŸŒ Site : www.alex-garnier.com",
            "email": "ðŸ“§ Vous pouvez contacter Alex Ã  : alex.garnier@techpro.com\n\nIl rÃ©pond gÃ©nÃ©ralement sous 24h ! âš¡",
            "tÃ©lÃ©phone": "ðŸ“± Ligne directe d'Alex : 07 89 45 67 12\n\nDisponible en semaine de 9h Ã  18h ðŸ•’",
            "rendez-vous": "ðŸ“… Pour planifier un rendez-vous :\n\n1. Envoyez vos disponibilitÃ©s par email\n2. PrÃ©cisez le sujet de la rencontre\n3. Indiquez votre mode prÃ©fÃ©rÃ© (visio/prÃ©sentiel)\n\nâ†’ alex.garnier@techpro.com ðŸ“§",

            // CompÃ©tences et Expertise
            "compÃ©tences": "ðŸš€ Les domaines d'expertise d'Alex :\n\nðŸ¤– Intelligence Artificielle\nâ˜ï¸ Cloud Computing\nðŸ’» DÃ©veloppement Web\nðŸ“Š Data Science\n\nQuel domaine vous intÃ©resse ? Je peux vous donner plus de dÃ©tails !",
            "intelligence artificielle": "ðŸ¤– Expertise en IA :\n\nâ€¢ Machine Learning\nâ€¢ Deep Learning\nâ€¢ NLP\nâ€¢ Computer Vision\n\nðŸ† 10+ ans d'expÃ©rience\nðŸ“ˆ 50+ projets rÃ©alisÃ©s\n\nVoulez-vous des exemples concrets ? ðŸ˜Š",
            "ia": "ðŸ¤– En IA, Alex c'est :\n\nâ€¢ 10+ ans d'expÃ©rience\nâ€¢ 3 brevets dÃ©posÃ©s\nâ€¢ Publications scientifiques\nâ€¢ Projets innovants\n\nðŸŽ¯ SpÃ©cialitÃ©s : ML, DL, NLP\nOn en discute ? ðŸ˜Š",
            "cloud": "â˜ï¸ Expertise Cloud :\n\nâ€¢ AWS â­â­â­\nâ€¢ Azure â­â­â­\nâ€¢ Google Cloud â­â­â­\n\nðŸ› ï¸ Services : Migration, Optimisation, DevOps\nðŸ’¡ Certifications : AWS Solutions Architect, Azure Expert",
            "dÃ©veloppement": "ðŸ’» Stack technique d'Alex :\n\nâ€¢ Backend : Python, Java, Node.js\nâ€¢ Frontend : React, Vue.js\nâ€¢ Mobile : React Native\nâ€¢ BDD : PostgreSQL, MongoDB\n\nðŸ—ï¸ Architecture : Microservices, Serverless",
            "web": "ðŸŒ Dev Web Expertise :\n\nâ€¢ Frontend : React, Vue.js, TypeScript\nâ€¢ Backend : Node.js, Python\nâ€¢ Performance : SEO, PWA\nâ€¢ UI/UX : Design responsive\n\nðŸš€ +100 sites en production",

            // Formation et Parcours
            "formation": "ðŸŽ“ Parcours acadÃ©mique :\n\nâ€¢ Doctorat en IA (Paris)\nâ€¢ Master Informatique (Lyon)\nâ€¢ Certifications : AWS, Azure, Google\n\nðŸ“š Formation continue : +30h/mois",
            "expÃ©rience": "ðŸ’¼ Parcours professionnel :\n\nâ€¢ 2021-now : Lead Dev IA @NeuralTech\nâ€¢ 2015-2021 : Senior Dev @CodeGen\nâ€¢ 2014 : Stage @Stanford\n\nðŸ† +50 projets rÃ©ussis",
            "parcours": "ðŸš€ Evolution de carriÃ¨re :\n\n1. 2014 : DÃ©but @CodeGen\n2. 2015-2021 : Evolution Senior\n3. 2021-now : Lead IA @NeuralTech\n\nðŸ“ˆ Croissance continue !",

            // Projets
            "projets": "ðŸŽ¯ Projets phares :\n\n1. ðŸ¥ IA MÃ©dicale PrÃ©dictive\n2. ðŸ›’ SystÃ¨me E-commerce IA\n3. âš¡ Gestion Ã‰nergÃ©tique Smart\n\nLequel vous intÃ©resse ? ðŸ˜Š",
            "rÃ©alisations": "ðŸ† Top rÃ©alisations :\n\nâ€¢ ðŸ¤– Plateforme IA MÃ©dicale\nâ€¢ ðŸ“Š Analytics E-commerce\nâ€¢ ðŸŒ± App Eco-energie\n\nðŸ’¡ DÃ©tails souhaitÃ©s ?",

            // Tarifs et Devis
            "tarifs": "ðŸ’° Grille tarifaire :\n\nâ€¢ Consulting : 800-1200â‚¬/jour\nâ€¢ DÃ©veloppement : sur devis\nâ€¢ Formation : 2000â‚¬/jour\n\nðŸ“ Devis personnalisÃ© sur demande",
            "devis": "ðŸ“‹ Pour un devis personnalisÃ© :\n\n1. DÃ©crivez votre projet\n2. PrÃ©cisez vos dÃ©lais\n3. Envoyez Ã  alex.garnier@techpro.com\n\nâš¡ RÃ©ponse sous 48h !",
            "prix": "ðŸ’³ Les tarifs varient selon :\n\nâ€¢ ComplexitÃ© du projet\nâ€¢ DurÃ©e estimÃ©e\nâ€¢ Technologies requises\n\nðŸ’¡ Besoin d'un devis ? Contactez-nous !",

            // Questions diverses
            "merci": "ðŸ™ Je vous en prie ! N'hÃ©sitez pas si vous avez d'autres questions. Bonne journÃ©e ! âœ¨",
            "au revoir": "ðŸ‘‹ Au revoir ! Merci de votre intÃ©rÃªt pour les services d'Alex. Ã€ bientÃ´t ! ðŸŒŸ",
            "localisation": "ðŸ“ Localisation :\n\nâ€¢ Bureau : Paris 8Ã¨me\nâ€¢ TÃ©lÃ©travail : Possible\nâ€¢ DÃ©placements : France + International\n\nðŸŒ Clients dans 15+ pays",
            "langue": "ðŸ—£ï¸ Langues parlÃ©es :\n\nâ€¢ FranÃ§ais : Natif ðŸ‡«ðŸ‡·\nâ€¢ Anglais : Bilingue ðŸ‡¬ðŸ‡§\nâ€¢ Espagnol : Courant ðŸ‡ªðŸ‡¸",

            // RÃ©ponse par dÃ©faut
            "default": "â“ DÃ©solÃ©, je n'ai pas bien compris.\n\nJe peux vous parler de :\nâ€¢ ðŸ’¼ CompÃ©tences\nâ€¢ ðŸš€ Projets\nâ€¢ ðŸ“… DisponibilitÃ©s\nâ€¢ ðŸ’° Tarifs\n\nQue souhaitez-vous savoir ? ðŸ˜Š"
        };
        
        this.init();
    }

    init() {
        const chatBubble = document.querySelector('.chat-bubble');
        const chatBox = document.querySelector('.chat-box');
        const closeChat = document.querySelector('.close-chat');
        const sendButton = document.querySelector('.send-message');
        const input = document.querySelector('.chat-input input');
        
        chatBubble.addEventListener('click', () => {
            chatBox.classList.add('active');
            this.addMessage("Bonjour ! Comment puis-je vous aider ?", 'bot');
        });
        
        closeChat.addEventListener('click', () => {
            chatBox.classList.remove('active');
        });
        
        sendButton.addEventListener('click', () => this.handleUserInput(input));
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') this.handleUserInput(input);
        });
    }

    handleUserInput(input) {
        if (!input.value.trim()) return;
        
        this.addMessage(input.value, 'user');
        this.processUserInput(input.value);
        input.value = '';
    }

    addMessage(text, type) {
        const messagesDiv = document.querySelector('.chat-messages');
        const message = document.createElement('div');
        message.classList.add('message', `${type}-message`);
        message.textContent = text;
        messagesDiv.appendChild(message);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    processUserInput(input) {
        const lowercaseInput = input.toLowerCase();
        let response = this.responses.default;

        for (const [key, value] of Object.entries(this.responses)) {
            if (lowercaseInput.includes(key)) {
                response = value;
                break;
            }
        }

        setTimeout(() => {
            this.addMessage(response, 'bot');
        }, 500);
    }
}

// Initialiser le chatbot avec le reste du code DOMContentLoaded
document.addEventListener('DOMContentLoaded', () => {
    // ... autre code existant ...
    new Chatbot();
});

// Animation des compteurs amÃ©liorÃ©e
const animateCounter = (counter, target) => {
    const duration = 2000;
    const steps = 60;
    const stepValue = target / steps;
    let current = 0;
    
    const updateCounter = () => {
        current += stepValue;
        if (current < target) {
            counter.textContent = Math.round(current);
            requestAnimationFrame(updateCounter);
        } else {
            counter.textContent = target;
        }
    };
    
    updateCounter();
};

// Observer pour les animations au scroll
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            if (entry.target.classList.contains('stat-item')) {
                const counter = entry.target.querySelector('.counter');
                const target = parseInt(counter.dataset.value);
                animateCounter(counter, target);
            }
        }
    });
}, observerOptions);

// Effet de particules
const createParticles = () => {
    const header = document.querySelector('header');
    const particles = document.createElement('div');
    particles.className = 'particles';
    
    for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDuration = `${Math.random() * 3 + 2}s`;
        particle.style.animationDelay = `${Math.random() * 2}s`;
        particles.appendChild(particle);
    }
    
    header.appendChild(particles);
};

// Effet de curseur personnalisÃ©
const createCursorEffect = () => {
    const cursor = document.createElement('div');
    cursor.className = 'cursor-effect';
    document.body.appendChild(cursor);
    
    document.addEventListener('mousemove', (e) => {
        cursor.style.left = e.clientX + 'px';
        cursor.style.top = e.clientY + 'px';
    });
};

// Initialisation
document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));
    createParticles();
    createCursorEffect();
});

// Timeline animation
const timelineItems = document.querySelectorAll('.timeline-item');

const timelineObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            timelineObserver.unobserve(entry.target);
        }
    });
}, {
    threshold: 0.5,
    rootMargin: '0px 0px -50px 0px'
});

timelineItems.forEach(item => {
    timelineObserver.observe(item);
});

// Ajout de l'effet typing pour le message d'accueil
const messages = [
    "SpÃ©cialiste en Intelligence Artificielle ðŸ¤–",
    "Expert en Cloud Computing â˜ï¸",
    "PassionnÃ© par l'Innovation ðŸ’¡",
    "DÃ©veloppeur Full Stack ðŸ’»"
];

let messageIndex = 0;
let charIndex = 0;
let isDeleting = false;
const typingDelay = 100;
const erasingDelay = 50;
const newMessageDelay = 2000;

function typeMessage() {
    const typedElement = document.getElementById('typed');
    if (!typedElement) return;

    const currentMessage = messages[messageIndex];
    
    if (isDeleting) {
        charIndex--;
    } else {
        charIndex++;
    }

    typedElement.textContent = currentMessage.substring(0, charIndex);

    let typeSpeed = isDeleting ? erasingDelay : typingDelay;

    if (!isDeleting && charIndex === currentMessage.length) {
        typeSpeed = newMessageDelay;
        isDeleting = true;
    } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        messageIndex++;
        if (messageIndex === messages.length) {
            messageIndex = 0;
        }
    }

    setTimeout(typeMessage, typeSpeed);
}

// Initialisation
document.addEventListener('DOMContentLoaded', () => {
    typeMessage();
    // ... reste du code d'initialisation existant
});